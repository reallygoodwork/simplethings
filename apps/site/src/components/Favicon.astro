<link rel="icon" type="image/svg+xml" href="/favicon.svg" />

<script>
  function trackFaviconVisibility() {
    const favicon = document.querySelector('link[rel="icon"]')!
    document.addEventListener('visibilitychange', () => {
      const hidden = document.hidden
      favicon.setAttribute('href', `/favicon${hidden ? '' : '-hidden'}.svg`)
    })
  }

  trackFaviconVisibility()

  document.addEventListener('astro:page-load', trackFaviconVisibility)
</script>
